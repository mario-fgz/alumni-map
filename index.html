<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alumni Map</title>
  <!-- Link to Mapbox GL CSS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js"></script>
  <style>
    /* Set the map container size */
    #map {
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>

  <h1>Alumni Map</h1>
  <div id="map"></div>

  <script>
    // Your Mapbox access token
    mapboxgl.accessToken = 'pk.eyJ1IjoibWFyaW9mZ3oiLCJhIjoiY21lMjlwajc4MHAxdDJxcHUwcWJhaTMzZSJ9.155BX_OMpbLYEk8AGx1unw'; // Replace with your actual access token

    // Initialize the map
    const map = new mapboxgl.Map({
      container: 'map', // The ID of the map container in the HTML
      style: 'mapbox://styles/mariofgz/cmd6wlcaj03hv01srcgvpbtos', // Replace with your Mapbox style URL
      center: [0, 0], // Center the map on (longitude, latitude)
      zoom: 2 // Initial zoom level
    });

    // Example of alumni GeoJSON data
    const alumniGeoJSON = {
      "type": "FeatureCollection",
      "features": [
        {
          "type": "Feature",
          "geometry": {
            "type": "Point",
            "coordinates": [-73.935242, 40.730610] // Example coordinates (New York)
          },
          "properties": {
            "country": "USA",
            "number_of_alumni": 10, // Example alumni count
            "student_profiles": [
              { "name": "John Doe", "photo": "student1.jpg" },
              { "name": "Jane Smith", "photo": "student2.jpg" }
            ]
          }
        },
        // Add more alumni data as needed...
      ]
    };

    // Add the alumni circles layer
    map.on('load', function() {
      map.addLayer({
        "id": "alumni-circles",
        "type": "circle",
        "source": {
          "type": "geojson",
          "data": alumniGeoJSON
        },
        "paint": {
          "circle-radius": [
            "interpolate",
            ["linear"],
            ["get", "number_of_alumni"],
            0, 5,  // Size of circle for 0 alumni
            100, 30 // Size of circle for 100 alumni
          ],
          "circle-color": "#ff5733" // Circle color
        }
      });

      // Hover functionality to display alumni count and country
      map.on('mouseenter', 'alumni-circles', function(e) {
        const country = e.features[0].properties.country;
        const alumniCount = e.features[0].properties.number_of_alumni;
        new mapboxgl.Popup()
          .setLngLat(e.lngLat)
          .setHTML(`${country}: ${alumniCount} alumni`)
          .addTo(map);
      });

      map.on('mouseleave', 'alumni-circles', function() {
        map.getCanvas().style.cursor = '';
      });

      // Click functionality to show student profiles
      map.on('click', 'alumni-circles', function(e) {
        const studentProfiles = e.features[0].properties.student_profiles;
        const profileHTML = studentProfiles.map(profile => {
          return `<div>${profile.name} - <img src="${profile.photo}" alt="${profile.name}" /></div>`;
        }).join('');

        new mapboxgl.Popup()
          .setLngLat(e.lngLat)
          .setHTML(profileHTML)
          .addTo(map);
      });
    });

  </script>

</body>
</html>
